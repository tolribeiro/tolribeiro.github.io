<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Thiago Ribeiro" />
    <meta name="description" content="Personal website and blog about personal projects">
    <link rel="icon" href="./static/img/favicon.ico" type="image/gif">


    
      <title>Sound Level Meter with ESP8266, Arduino and iOS: IoT device for sound monitoring</title>
    
	
    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ=="
    crossorigin="anonymous">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

	<!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="static/css/main.css" />
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old" />
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="static/css/bootstrap.icon-large.min.css" />
    <link rel="stylesheet" type="text/css" href="static/css/syntax.css" />

    <!-- Google Analytics -->
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61161310-1', 'auto');
  ga('send', 'pageview');

</script>
  </head>
  <!-- Main Body-->
  <body>
  <!-- Wrap all page content here -->
  <div id="wrap">
    <!-- Navbar header -->
    <nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="http://toribeiro.com"><i class="fa fa-home"></i></a>
    </div>
    <div id="navbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="blog.html">BLOG</a></li>
        <!--<li><a href="projects.html">PROJECTS</a></li>-->
        <!-- <li><a href="./static/resume/TR-Resume-English.pdf" target="_blank">RESUME</a></li> -->
        <li><a href="./static/resume/TR-Resume-English.pdf" target="_blank">RESUME</a></li>
      </ul>
    </div>
  </div>
</nav>

    <div class="container">
	<div class="blog-post">
		<h3>
		  <strong><a href="/sound-level-meter-using-esp8266-arduino-sound-detector.html">Sound Level Meter with ESP8266, Arduino and iOS: IoT device for sound monitoring</a></strong>
		</h3>
	</div>
	<div class="blog-title">
		<h4>
		January 10, 2016
			&nbsp;&nbsp;
			
		</h4>
	</div>
	<div class="panel panel-default">
		<div class="panel-body">
			<div class="blogpost">
			  <h3>The purpose of the project: mapping noise in cities</h3>

<p>Nowadays, even without noticing, we have been surrounded by a lot of noise. This noise comes from all sorts of sources such as bars, cars, trains, parties and so on. When this noise starts affecting our well-being or health, we give it a name: <em>noise pollution</em>.</p>

<p>Therefore, my idea was to create a device that would be cheap to assemble and that could be installed in certain areas of the city, constantly updating data about sound levels to a web server and making them available to the population.</p>

<h3>The hardware: Arduino, Sound Level Meter and ESP8266</h3>

<p>In order to measure the sound level (analog value), I decided to use the SparkFun Sound Detector (SSD). This little IC has three outputs: <code>audio</code>, <code>gate</code> and <code>envelope</code>. As the purpose is to measure the amplitude of sound, to me, the <code>envelope</code> output is what separates this board from the others (figure below).</p>

<p><img src="./static/img/spark.jpg" width="252" height="188" class="img-responsive center-block" /></p>

<p>Besides, the Arduino UNO works as the &ldquo;brain&rdquo; in the system. Regarding the interaction with the SSD, it reads the <code>envelope</code> output into the analog port <code>A0</code> and converts it to a value in decibel, a logarithmic scale used in sound measuring.</p>

<p>Additionally, the ESP8266 module (figure below), this extremely versatile IC was used as a station, connecting the hardware to the local network using WiFi. It is important to mention that the more advanced versions of the ESP have an ADC port, which would exclude the use of an Arduino. However, in order to make it work for this project, two ports of the Arduino were used to transmit and receive data from the ESP (<code>TX</code> and <code>RX</code>).</p>

<p><img src="./static/img/esp.png" width="263" height="206" class="img-responsive center-block" /></p>

<h3>Assembling the parts on a breadboard</h3>

<p>After assembling the parts on a breadboard, I noticed that the user should be able to read the output data in two forms: being near and far from the device. Thus, I added a regular LCD that would print the status and the measure in decibels.
Furthermore, three LEDs would be able to alert the user about the loudness: if the green one is on, it means the place is quiet, if yellow the ambient noise is moderate and if red, it&rsquo;s loud.</p>

<p><br/>
<img src="./static/img/slm.png" width="512" height="401" class="img-responsive center-block" />
<br/></p>

<p>After doing a couple of tests with the ESP using a voltage regulator, I noticed that the response of the module is better when powered by a clean voltage source, which explains the two batteries used to exclusively power it, once the module works with 3,3V.</p>

<h3>The software: iOS App reading the data</h3>

<p>As a way of testing the system, I used the ThingSpeak server to update data directly from my device to the cloud. By using their API, I could read the data coming as a JSON object, parse it, and print it to the user. I set some pins on the map, where the user would hypothetically choose the place he wanted to monitor, and then notify by email or call in case it is being loud.</p>

<p><br/>
<img src="./static/img/rm.png" width="279" height="496" class="img-responsive center-block" />
<br/>
The points on the map are from a central part of Recife, the city I live. The idea is to have several devices spread around a given city, updating data about how noisy is the location at any time. Finally, in the video I explain how the hardware and the software work together. :)</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/G-qB4gLC1Ag" class ="center-block" frameborder="0" allowfullscreen></iframe>




			   <hr>
			   <div class="related-posts">
				   <h5>Related Posts</h5>
				   
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	December 28, 2015
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="/understanding-graph-coloring-part-II.html">Understanding Graph Coloring (vertex): C++ code and visual graph in LaTeX  (Part II)</a></strong>
								 </h6>
							 </div>
						</div>
					
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	December 21, 2015
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="/understanding-graph-coloring-part-I.html">Understanding Graph Coloring (vertex): a greedy approach (Part I)</a></strong>
								 </h6>
							 </div>
						</div>
					
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	September 27, 2015
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="/first-iOS-App.html">My very fist iOS App: controlling work hours</a></strong>
								 </h6>
							 </div>
						</div>
					
			   </div>
			</div>
		</div>
	</div>
	

</div>


  </div>
  <!-- Footer -->
  <footer>
    <div id="footer">
        <div class="container">
            <p class="text-muted">Â© Adapted by Thiago Ribeiro, powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and
            <a href="http://www.github.com/biomadeira/sustain" target="_blank">sustain</a>.</p>
        </div>
    </div>
</footer>
<div class="footer"></div>

  

    <!-- Bootstrap core JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"
    integrity="sha256-Sk3nkD6mLTMOF0EOpNtsIry+s1CsaqQC1rVLTAy+0yc= sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ=="
    crossorigin="anonymous"></script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="static/js/docs.min.js"></script>
    <script src="static/js/main.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="static/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>